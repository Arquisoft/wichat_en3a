<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">
<head>
    <title>Wordle Game</title>
    <link rel="stylesheet" th:href="@{/css/wordle.css}">
</head>
<body>
<div class="container">
    <h1>Wordle - [[${wordle.category}]]</h1>

    <div class="board">
        <div th:each="attempt : ${wordle.attempts}" class="word-row">
                <span th:each="letter, iStat : ${T(java.util.Arrays).asList(attempt.toCharArray())}"
                      th:text="${letter}" th:class="'letter-box ' + ${wordle.getLetterColor(iStat.index, letter)}"></span>
        </div>

        <div th:if="${!wordle.isFinished()}" class="word-row">
            <form th:action="@{/wordle/guess}" method="post">
                <input type="text" name="guess" maxlength="5" required autocomplete="off"/>
                <button type="submit">Try</button>
            </form>
        </div>

        <div th:each="i : ${#numbers.sequence(wordle.attempts.size() + 1, wordle.maxAttempts)}" class="word-row">
            <span class="letter-box empty-box" th:each="j : ${#numbers.sequence(1, 5)}"></span>
        </div>
    </div>

    <div th:if="${wordle.isFinished()}" class="result">
        <p th:text="${wordle.isCorrect() ? 'You won! ðŸŽ‰' : 'You lost. ðŸ˜¢ The word was: ' + wordle.targetWord}"></p>
        <form th:action="@{/wordle/reset}" method="post">
            <button type="submit">Play Again</button>
        </form>
    </div>

    <form th:action="@{/}" method="get">
        <button type="submit" class="exit-button">Salir</button>
    </form>
</div>
</body>
</html>
