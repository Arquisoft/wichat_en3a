<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org" lang="es">
<head>
    <meta charset="UTF-8">
    <title>Wordle</title>
    <link rel="stylesheet" th:href="@{/css/wordle.css}">
</head>
<body>
<div class="container">
    <h1>Wordle</h1>

    <div id="game-board">
        <div th:each="attempt, iStat : ${attemptsSplit}" class="row">
            <div th:each="letter, jStat : ${attempt}"
                 th:class="'tile ' + ${feedbackHistory[iStat.index][jStat.index]?.name()?.toLowerCase()}"
                 th:text="${letter}">
            </div>
        </div>
        <!-- casillas vacías restantes -->
        <div th:each="i : ${#numbers.sequence(wordle.attempts.size() + 1, wordle.maxAttempts)}" class="row">
            <div class="tile empty" th:each="j : ${#numbers.sequence(1, wordle.maxAttempts)}"></div>
        </div>
    </div>

    <form th:action="@{/wordle/guess}" method="post" th:if="${wordle.status.name() == 'PLAYING'}" class="guess-form">
        <input type="text" name="guess" maxlength="5" required autocomplete="off">
        <button type="submit">Enviar</button>
    </form>

    <div class="status">
        <p th:if="${wordle.status.name() == 'WIN'}">🎉 ¡Has ganado!</p>
        <p th:if="${wordle.status.name() == 'LOSE'}">😢 Has perdido. La palabra era <strong th:text="${wordle.targetWord}"></strong></p>
        <p th:if="${wordle.status.name() == 'PLAYING'}">Intentos restantes: <span th:text="${wordle.remainingAttempts}"></span></p>
    </div>

    <form th:action="@{/wordle/reset}" method="post">
        <button type="submit" class="reset-btn">Reiniciar partida</button>
    </form>
</div>
</body>
</html>
